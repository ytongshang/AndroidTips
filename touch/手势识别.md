# 普通的手势识别

- 对于activity或view触措事件,使用getActionMasked() 获得纯粹的事件类型，而不包含Pointer信息

  ```java
  public class MainActivity extends Activity {
  // This example shows an Activity, but you would use the same approach if
  // you were subclassing a View.
  @Override
  public boolean onTouchEvent(MotionEvent event){

    int action = MotionEventCompat.getActionMasked(event);

    switch(action) {
        case (MotionEvent.ACTION_DOWN) :
            Log.d(DEBUG_TAG,"Action was DOWN");
            return true;
        case (MotionEvent.ACTION_MOVE) :
            Log.d(DEBUG_TAG,"Action was MOVE");
            return true;
        case (MotionEvent.ACTION_UP) :
            Log.d(DEBUG_TAG,"Action was UP");
            return true;
        case (MotionEvent.ACTION_CANCEL) :
            Log.d(DEBUG_TAG,"Action was CANCEL");
            return true;
        case (MotionEvent.ACTION_OUTSIDE) :
            Log.d(DEBUG_TAG,"Movement occurred outside bounds " +
                    "of current screen element");
            return true;
        default :
            return super.onTouchEvent(event);
    }
  }
  ```

- 如果继承一个类，可重写onTouchEvent方法，而如果不想继承生成新的类，可以使用setOnTouchListener

```java
View myView = findViewById(R.id.my_view);
myView.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        // ... Respond to touch events
        return true;
    }
});
```

- 如果要识别一个手势是长按，双击，滑动等，应当使用 GestureDetector 进行手势识别,GestureDetector类对外提供了两个接口：OnGestureListener，OnDoubleTapListener，还有一个内部类SimpleOnGestureListener；SimpleOnGestureListener类是GestureDetector提供给我们的一个更方便的响应不同手势的类，它实现了上述两个接口，该类是static class，也就是说它实际上是一个外部类，我们可以在外部继承这个类，重写里面的手势处理方法。因此实现手势识别有两种方法，一种实现OnGestureListener接口，另一种是使用SimpleOnGestureListener类

- OnGestureListener有下面的几个动作

  - 按下（onDown）： 刚刚手指接触到触摸屏的那一刹那，就是触的那一下。
  - 抛掷（onFling）： 手指在触摸屏上迅速移动，并松开的动作。
  - 长按（onLongPress）： 手指按在持续一段时间，并且没有松开。
  - 滚动（onScroll）： 手指在触摸屏上滑动。
  - 按住（onShowPress）： 手指按在触摸屏上，它的时间范围在按下起效，在长按之前。
  - 抬起（onSingleTapUp）：手指离开触摸屏的那一刹那。

  - 相关函数

  ```java
  abstract boolean onDown(MotionEvent e)
  Notified when a tap occurs with the down MotionEvent that triggered it.

  abstract boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
  Notified of a fling event when it occurs with the initial on down MotionEvent and the matching up MotionEvent.

  abstract void onLongPress(MotionEvent e)
  Notified when a long press occurs with the initial on down MotionEvent that trigged it.

  abstract boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)
  Notified when a scroll occurs with the initial on down MotionEvent and the current move MotionEvent.

  abstract void onShowPress(MotionEvent e)
  The user has performed a down MotionEvent and not performed a move or up yet.

  abstract boolean onSingleTapUp(MotionEvent e)
  Notified when a tap occurs with the up MotionEvent that triggered it.
  ```
